<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>NivelMat - Curso de Nivelación Matemática</title>
		<style>
			:root {
				--primary-color: #009;
				--text-color: #fff;
				--botton-color: #fff;
				--secundary-color: #bb9333;
			}
			body {
				margin: 0;
				font-family: 'Segoe UI', Arial, sans-serif;
				background: #f5f5f5;
				color: #222;
			}
			.fadein {
				opacity: 0;
				transform: translateY(30px);
				animation: fadein 1s ease forwards;
			}
			.fadein.delay1 { animation-delay: 0.2s; }
			.fadein.delay2 { animation-delay: 0.5s; }
			.fadein.delay3 { animation-delay: 0.8s; }
			@keyframes fadein {
				to {
					opacity: 1;
					transform: none;
				}
			}
			.superior {
				background: var(--primary-color);
				color: var(--text-color);
				padding: 32px 0 24px 0;
				text-align: center;
				position: relative;
			}
			.logo-nivelmat {
				width: 90px;
				height: auto;
				margin-bottom: 12px;
			}
			.titulo-nivelmat {
				font-size: 2em;
				font-weight: 700;
				margin-bottom: 18px;
				letter-spacing: 1px;
			}
			.botones-nav {
				display: flex;
				justify-content: center;
				gap: 18px;
				margin-top: 10px;
			}
			.boton-esferico {
				background: var(--botton-color);
				color: var(--primary-color);
				border: none;
				border-radius: 999px;
				padding: 10px 28px;
				font-size: 1em;
				font-weight: 600;
				cursor: pointer;
				box-shadow: 0 2px 8px rgba(0,0,0,0.08);
				transition: background 0.2s, color 0.2s;
			}
			.boton-esferico:hover {
				background: var(--secundary-color);
				color: #fff;
			}
			@media (max-width: 600px) {
				.superior { padding: 18px 0 12px 0; }
				.titulo-nivelmat { font-size: 1.2em; }
				.logo-nivelmat { width: 60px; }
				.boton-esferico { padding: 8px 16px; font-size: 0.95em; }
			}
		</style>
		<style>
			/* Multi-pane (condiciones -> formulario) */
			.multi-pane { max-width: 800px; margin: 40px auto 0 auto; position: relative; overflow: hidden; border-radius: 18px; }
			.multi-pane .panes { position: relative; }
			.pane { background: #fff; padding: 36px 32px; box-shadow: 0 6px 32px rgba(0,0,0,0.13); border-radius: 18px; transition: transform 0.64s cubic-bezier(.2,.9,.2,1), opacity 0.48s ease; position: absolute; left: 0; right: 0; top: 0; }
			.pane-info { z-index: 2; }
			.pane-form { opacity: 0; transform: translateY(16px); pointer-events: none; }
			.pane-success { opacity: 0; transform: translateY(16px); pointer-events: none; }
			.multi-pane.show-form .pane-info { transform: translateY(-120%); opacity: 0; }
			.multi-pane.show-form .pane-form { transform: translateY(0); opacity: 1; pointer-events: auto; }
			.multi-pane.show-success .pane-form { transform: translateY(-120%); opacity: 0; pointer-events: none; }
			.multi-pane.show-success .pane-success { transform: translateY(0); opacity: 1; pointer-events: auto; }
			.interesado-btn { background: var(--primary-color); color: #fff; border: none; padding: 12px 20px; border-radius: 10px; font-weight:700; cursor:pointer; }
			.interesado-btn:hover { background: var(--secundary-color); }
			/* Asegurar buena experiencia en móvil */
			@media (max-width:600px){ .pane { padding: 20px; } .pane + .pane{ margin-top:14px;} }
		</style>
				<style>
				.info-rect {
					max-width: 800px;
					margin: 40px auto 0 auto;
					background: #fff;
					border-radius: 18px;
					box-shadow: 0 6px 32px rgba(0,0,0,0.13);
					padding: 38px 32px 32px 32px;
					text-align: center;
					position: relative;
					z-index: 2;
				}
				select {
					color: #999;
				}
				select option {
					color: #222;
				}
				select.seleccionado {
					color: #222;
				}
				.enviar-btn {
					background: var(--primary-color);
					color: #fff;
					border: none;
				}
				.enviar-btn:hover {
					background: var(--secundary-color);
					color: #fff;
				}
				</style>
</head>
<body>
		<div class="superior">
			<img src="nivelmat.png" alt="Logo NivelMat" class="logo-nivelmat fadein delay1" />
			<div class="titulo-nivelmat fadein delay2">NivelMat - Curso de Nivelación Matemática</div>
			<div class="botones-nav fadein delay3">
				<a href="https://nivelmat.github.io/home/" style="text-decoration:none;"><button class="boton-esferico">Inicio</button></a>
				<a href="https://nivelmat.github.io/contactos/" style="text-decoration:none;"><button class="boton-esferico">Contactos</button></a>
			</div>
		</div>
</div>
	<div class="multi-pane fadein delay2 info-rect">
		<div class="panes">
			<section class="pane pane-info">
				<h2 style="margin-top:0;color:#222;">Condiciones y ¿Qué es?</h2>
				<p style="color:#444;line-height:1.45;margin-bottom:12px;text-align:left;">
					<strong>NivelMat</strong> es un curso organizado por la Comisión de Extensión de la Facultad de Ciencias, UCV, junto a la Escuela de Matemática. Su objetivo es fortalecer tus conocimientos matemáticos y prepararte para iniciar tus estudios universitarios.
				</p>
				<p style="color:#444;line-height:1.45;margin-bottom:12px;text-align:left;">
					Su costo es de <strong>135$</strong>, lo cual puede pagar en dólares en efectivo o transferencia bancaria en bolívares a tasa BCV, la cual se debe realizar el día de la inscripción.
				</p>
				<p style="color:#666;text-align:left;margin-bottom:22px;">Por favor lea las condiciones con atención antes de continuar.</p>
				<div style="text-align:center;">
					<button id="interesadoBtn" class="interesado-btn">¿Está usted interesado?</button>
				</div>
			</section>

			<section class="pane pane-form" aria-hidden="true">
				<h2 style="margin-top:0;color:#222;">Formulario de Preinscripción</h2>
				<p style="color:#888;margin-bottom:24px;">Intente llenar todos los campos</p>

				<form style="text-align:left;">
			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Nombres <span style="color:#d32f2f;">*</span></label>
				<input id="nombres" type="text" placeholder="Tu nombre" required oninput="validarTextoNombre(this)" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				<small id="nombresError" style="display:none;color:#d32f2f;margin-top:6px;font-size:0.9em;"></small>
			</div>

			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Apellidos <span style="color:#d32f2f;">*</span></label>
				<input id="apellidos" type="text" placeholder="Tus apellidos" required oninput="validarTextoNombre(this)" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				<small id="apellidosError" style="display:none;color:#d32f2f;margin-top:6px;font-size:0.9em;"></small>
			</div>

			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Cédula <span style="color:#d32f2f;">*</span></label>
				<div style="display:flex;gap:8px;align-items:center;">
					<select id="ciPrefijo" onchange="actualizarColorSelect(this)" required style="width:96px;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;background:#fff;">
						<option value="V">V</option>
						<option value="E">E</option>
					</select>
					<input id="ciNumero" type="text" placeholder="Formato: 12345678" required oninput="validarCIInput(this)" style="flex:1;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				</div>
				<small id="ciError" style="display:none;color:#d32f2f;margin-top:6px;font-size:0.9em;"></small>
			</div>

			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">¿Eres bachiller? <span style="color:#d32f2f;">*</span></label>
				<select id="esBachiller" onchange="mostrarCamposBachiller()" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;background:#fff;">
					<option value="">Selecciona una opción</option>
					<option value="si">Sí</option>
					<option value="no">No</option>
				</select>
			</div>

			<div id="camposBachiller" style="display:none;margin-bottom:16px;padding:16px;background:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0;">
				<div style="margin-bottom:16px;">
					<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Colegio de procedencia <span style="color:#888;">(opcional)</span></label>
					<input id="colegioProcedencia" type="text" placeholder="Nombre del colegio" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				</div>
			</div>

			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">¿Estudias en una universidad? <span style="color:#d32f2f;">*</span></label>
				<select id="estudiaUniversidad" onchange="mostrarCamposUniversidad()" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;background:#fff;">
					<option value="">Selecciona una opción</option>
					<option value="si">Sí</option>
					<option value="no">No</option>
				</select>
			</div>

			<div id="camposUniversidad" style="display:none;margin-bottom:16px;padding:16px;background:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0;">
				<div style="margin-bottom:16px;">
					<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Universidad <span style="color:#d32f2f;">*</span></label>
					<input id="universidadNombre" type="text" placeholder="Nombre de la universidad" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				</div>

				<div style="margin-bottom:0;">
					<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Carrera <span style="color:#d32f2f;">*</span></label>
					<input id="universidadCarrera" type="text" placeholder="Nombre de la carrera" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				</div>
			</div>

			<div style="margin-bottom:16px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Numero de celular al que lo podamos contactar <span style="color:#d32f2f;">*</span></label>
				<input id="telefono" type="tel" placeholder="+584... o 04..." required oninput="filtrarTelefono(this)" onblur="validarTelefono(this)" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				<small id="telefonoError" style="display:none;color:#d32f2f;margin-top:6px;font-size:0.9em;"></small>
			</div>

			<div style="margin-bottom:24px;">
				<label style="display:block;margin-bottom:6px;font-weight:600;color:#222;">Gmail <span style="color:#d32f2f;">*</span></label>
				<input id="correo" type="email" placeholder="tu.email@gmail.com" required onblur="validarCorreo(this)" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:1em;box-sizing:border-box;">
				<small id="correoError" style="display:none;color:#d32f2f;margin-top:6px;font-size:0.9em;"></small>
			</div>

			<button type="submit" class="boton-esferico enviar-btn" style="width:100%;padding:12px;font-size:1.1em;font-weight:600;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:background 0.2s;">
				Enviar Preinscripción
			</button>
			</form>
		</section>

		<section class="pane pane-success" aria-hidden="true">
			<div style="text-align:center;">
				<div style="font-size:3em;margin-bottom:16px;color:var(--primary-color);">✓</div>
				<h2 style="margin-top:0;color:#222;">Preinscripción Enviada</h2>
				<p style="color:#666;line-height:1.6;margin-bottom:24px;">
					¡Gracias por completar tu preinscripción! Nos pondremos en contacto contigo pronto a través de tu número de celular o correo electrónico.
				</p>
				<button id="finalizarBtn" class="interesado-btn" style="background:var(--primary-color);color:#fff;border:none;padding:12px 28px;border-radius:10px;font-weight:700;cursor:pointer;font-size:1em;">
					Volver al Inicio
				</button>
			</div>
		</section>
		</div>
	</div>

	<script>
		function mostrarCamposBachiller() {
			const esBachiller = document.getElementById('esBachiller');
			const camposBachiller = document.getElementById('camposBachiller');
			const multiPane = document.querySelector('.multi-pane');
			
			if (esBachiller.value === 'si') {
				camposBachiller.style.display = 'block';
			} else {
				camposBachiller.style.display = 'none';
			}
			
			actualizarColorSelect(esBachiller);
			// Recalcular altura del contenedor después de mostrar/ocultar campos
			if (multiPane) {
				setTimeout(() => {
					const activePane = multiPane.querySelector('.pane[style*="opacity: 1"]') || multiPane.querySelector('.pane-form');
					if (activePane) multiPane.style.height = activePane.offsetHeight + 'px';
				}, 50);
			}
		}

		function mostrarCamposUniversidad() {
			const estudiaUniversidad = document.getElementById('estudiaUniversidad');
			const camposUniversidad = document.getElementById('camposUniversidad');
			const uniNombre = document.getElementById('universidadNombre');
			const uniCarrera = document.getElementById('universidadCarrera');
			const multiPane = document.querySelector('.multi-pane');
			
			if (estudiaUniversidad.value === 'si') {
				camposUniversidad.style.display = 'block';
				uniNombre.setAttribute('required','');
				uniCarrera.setAttribute('required','');
			} else {
				camposUniversidad.style.display = 'none';
				uniNombre.removeAttribute('required');
				uniCarrera.removeAttribute('required');
			}
			
			actualizarColorSelect(estudiaUniversidad);
			// Recalcular altura del contenedor después de mostrar/ocultar campos
			if (multiPane) {
				setTimeout(() => {
					const activePane = multiPane.querySelector('.pane[style*="opacity: 1"]') || multiPane.querySelector('.pane-form');
					if (activePane) multiPane.style.height = activePane.offsetHeight + 'px';
				}, 50);
			}
		}

		function actualizarColorSelect(selectElement) {
			if (selectElement.value === '') {
				selectElement.classList.remove('seleccionado');
			} else {
				selectElement.classList.add('seleccionado');
			}
		}

			// Inicializar colores de selects al cargar
		document.addEventListener('DOMContentLoaded', function() {
			const selects = [document.getElementById('esBachiller'), document.getElementById('estudiaUniversidad'), document.getElementById('ciPrefijo')];
			selects.forEach(s => { if (s) actualizarColorSelect(s); });

			const multiPane = document.querySelector('.multi-pane');
			if (!multiPane) return;

			const panes = {
				info: multiPane.querySelector('.pane-info'),
				form: multiPane.querySelector('.pane-form'),
				success: multiPane.querySelector('.pane-success')
			};

			function updateContainerHeight(el){
				if (!el) return;
				// Agregar pequeño delay para que el DOM se actualice
				setTimeout(() => {
					multiPane.style.height = el.offsetHeight + 'px';
				}, 100);
			}

			function setActivePane(name){
				const order = ['info','form','success'];
				const activeIndex = order.indexOf(name);
				order.forEach((nm, idx) => {
					const el = panes[nm];
					if (!el) return;
					if (idx === activeIndex) {
						el.style.transform = 'translateY(0)';
						el.style.opacity = '1';
						el.style.pointerEvents = 'auto';
						el.setAttribute('aria-hidden','false');
					} else if (idx < activeIndex) {
						el.style.transform = 'translateY(-120%)';
						el.style.opacity = '0';
						el.style.pointerEvents = 'none';
						el.setAttribute('aria-hidden','true');
					} else {
						el.style.transform = 'translateY(16px)';
						el.style.opacity = '0';
						el.style.pointerEvents = 'none';
						el.setAttribute('aria-hidden','true');
					}
				});
				updateContainerHeight(panes[name]);
			}

			// aplicar posicionamiento y altura inicial
			const allPanes = multiPane.querySelectorAll('.pane');
			allPanes.forEach(p => { p.style.position='absolute'; p.style.left='0'; p.style.right='0'; p.style.top='0'; });
			setTimeout(()=> setActivePane('info'), 30);

			// Exponer para otras partes del script
			window.setActivePane = setActivePane;

			// Botón "¿Está usted interesado?": mostrar formulario con animación
			const interesadoBtn = document.getElementById('interesadoBtn');
			if (interesadoBtn) {
				interesadoBtn.addEventListener('click', function(ev){
					ev.preventDefault();
					setActivePane('form');
					setTimeout(()=>{
						const firstField = multiPane.querySelector('.pane-form form input, .pane-form form select, .pane-form form textarea, .pane-form form button');
						if (firstField) firstField.focus();
					}, 520);
				});
			}

			// Finalizar desde pane de éxito: volver a info
			const finalizarBtn = document.getElementById('finalizarBtn');
			if (finalizarBtn) finalizarBtn.addEventListener('click', function(){ setActivePane('info'); });
		});

		// --- Validaciones en tiempo real y antes de enviar ---

		function setError(elError, mensaje) {
			if (!elError) return;
			elError.textContent = mensaje;
			elError.style.display = 'block';
		}

		function clearError(elError) {
			if (!elError) return;
			elError.textContent = '';
			elError.style.display = 'none';
		}

		// Nombres / Apellidos: permitir letras (incluyendo acentos), espacios y guion
		function validarTextoNombre(input) {
			const invalid = /[^A-Za-zÁÉÍÓÚáéíóúÑñ\- ]/g;
			const errEl = document.getElementById(input.id + 'Error');
			if (invalid.test(input.value)) {
				input.value = input.value.replace(invalid, '');
				setError(errEl, 'Caracteres inválidos eliminados. Sólo letras, espacios y guion permitidos.');
			} else {
				clearError(errEl);
			}
		}

		// C.I.: permitir sólo dígitos en tiempo real y validar rango según prefijo
		function validarCIInput(input) {
			const cleaned = input.value.replace(/\D/g, '');
			const errEl = document.getElementById('ciError');
			if (cleaned !== input.value) {
				input.value = cleaned;
				setError(errEl, 'Sólo números permitidos en la cédula');
			}
			// validar rango si tiene al menos 1 dígito
			const num = parseInt(cleaned, 10);
			const prefijo = document.getElementById('ciPrefijo').value;
			if (!isNaN(num)) {
				// Si es V, validar rango. Si es E, no hay límites.
				if (prefijo === 'V' && !(num > 1000000 && num < 35000000)) {
					setError(errEl, 'La cédula V debe ser > 1.000.000 y < 35.000.000');
				} else {
					clearError(errEl);
				}
			} else {
				// si está vacío
				setError(errEl, 'La cédula es obligatoria');
			}
		}

		// Teléfono: permitir + y dígitos en tiempo real; validar formato al perder foco
		function filtrarTelefono(input) {
			const cleaned = input.value.replace(/[^+\d]/g, '');
			const errEl = document.getElementById('telefonoError');
			if (cleaned !== input.value) {
				input.value = cleaned;
				setError(errEl, 'Caracter inválido eliminado');
			} else {
				clearError(errEl);
			}
		}

		function validarTelefono(input) {
			const v = input.value.trim();
			// Aceptar cualquier teléfono que empiece con + seguido de dígitos, o 04 seguido de dígitos
			const patrones = [/^\+\d+$/, /^04\d+$/];
			const errEl = document.getElementById('telefonoError');
			const ok = patrones.some(r => r.test(v));
			if (!ok) {
				setError(errEl, 'Formato inválido');
			} else {
				clearError(errEl);
			}
			return ok;
		}

		// Correo: validar formato simple y sólo un arroba
		function validarCorreo(input) {
			const v = input.value.trim();
			const errEl = document.getElementById('correoError');
			if (v.length === 0) { setError(errEl, 'El correo es obligatorio'); return false; }
			if ((v.match(/@/g) || []).length !== 1) {
				setError(errEl, 'El correo debe contener un solo @');
				return false;
			}
			const simple = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			if (!simple.test(v)) {
				setError(errEl, 'Formato de correo inválido');
				return false;
			}
			clearError(errEl);
			return true;
		}

		// Validación final antes de enviar: evitar envío mientras existan errores visibles
		document.querySelector('form').addEventListener('submit', async function(ev) {
			ev.preventDefault();
			
			// Declarar variables de configuración PRIMERO (antes de usarlas)
			const isNivelMatPages = window.location.hostname === 'nivelmat.github.io';
			const APPS_SCRIPT_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzIZtuqGa5If6oqy9sVj9X6eXxevI2LbRJl3K8VzzfTZNPYDKIura3WS6_5n4knI2Vj/exec';
			const APPS_SCRIPT_TOKEN = 'qFsPnoyLV8fu51pqbkiRcT84ptajwFsh7y3zveaNsj4LNh2Qmv';
			const API_URL = isNivelMatPages ? APPS_SCRIPT_ENDPOINT : 'http://localhost:3000/api/preinscripcion';
			
			let ok = true;
			// Validaciones repetidas (asegurar que nada inválido quede)
			const ciVal = document.getElementById('ciNumero').value.replace(/\D/g,'');
			const ciNum = parseInt(ciVal,10);
			if (isNaN(ciNum) || !(ciNum > 1000000 && ciNum < 35000000)) {
				setError(document.getElementById('ciError'), 'La cédula debe ser > 1.000.000 y < 35.000.000');
				ok = false;
			}

			if (!validarTelefono(document.getElementById('telefono'))) ok = false;
			if (!validarCorreo(document.getElementById('correo'))) ok = false;

			const estudia = document.getElementById('estudiaUniversidad').value;
			if (estudia === 'si') {
				const uni = document.getElementById('universidadNombre').value.trim();
				const car = document.getElementById('universidadCarrera').value.trim();
				if (!uni) { setError(document.getElementById('universidadNombre').nextElementSibling, 'La universidad es obligatoria'); ok = false; }
				if (!car) { setError(document.getElementById('universidadCarrera').nextElementSibling, 'La carrera es obligatoria'); ok = false; }
			}

			const errores = ['nombresError','apellidosError','ciError','telefonoError','correoError'];
			errores.forEach(id => { if (document.getElementById(id) && document.getElementById(id).style.display !== 'none') ok = false; });

			if (!ok) {
				// enfocar primer campo con error
				for (const id of errores) {
					const el = document.getElementById(id);
					if (el && el.style.display !== 'none') {
						const field = document.getElementById(id.replace('Error',''));
						if (field) field.focus();
						break;
					}
				}
				return;
			}

			// Preparar payload
			const payload = {
				prefijo_ci: document.getElementById('ciPrefijo').value,
				ci: document.getElementById('ciNumero').value.replace(/\D/g,''),
				nombres: document.getElementById('nombres').value.trim(),
				apellidos: document.getElementById('apellidos').value.trim(),
				es_bachiller: document.getElementById('esBachiller').value,
				colegio: document.getElementById('colegioProcedencia').value || '',
				estudia_universidad: document.getElementById('estudiaUniversidad').value,
				universidad: document.getElementById('universidadNombre').value || '',
				carrera: document.getElementById('universidadCarrera').value || '',
				telefono: document.getElementById('telefono').value.trim(),
				correo: document.getElementById('correo').value.trim(),
				token: APPS_SCRIPT_TOKEN
			};

			const btn = this.querySelector('button[type=submit]');
			btn.disabled = true;
			btn.textContent = 'Enviando...';

			try {
				const resp = await fetch(API_URL, {
					method: 'POST',
					mode: isNivelMatPages ? 'no-cors' : 'cors',
					headers: { 'Content-Type': 'text/plain', 'Accept': 'application/json' },
					body: JSON.stringify(payload)
				});
				
				if (isNivelMatPages) {
					// Google Apps Script: mostrar éxito sin esperar respuesta
					if (window.setActivePane) window.setActivePane('success');
					this.reset();
					document.querySelectorAll('small').forEach(s => s.style.display = 'none');
				} else {
					// Servidor local: leer respuesta JSON
					const data = await resp.json();
					if (resp.ok) {
						if (window.setActivePane) window.setActivePane('success');
						this.reset();
						document.querySelectorAll('small').forEach(s => s.style.display = 'none');
					} else {
						alert('Error al enviar: ' + (data.error || resp.statusText));
					}
				}
			} catch (err) {
				alert('Error: ' + err.message);
			} finally {
				btn.disabled = false;
				btn.textContent = 'Enviar Preinscripción';
			}
		});
	</script>
	<footer class="footer-nivelmat fadein delay3" style="background:transparent;color:#888;font-size:1em;text-align:center;padding:18px 0 10px 0;margin-top:32px;letter-spacing:0.5px;box-shadow:none;">
		© 2025 NivelMat – Escuela de Matemática, UCV
	</footer>
</body>
</html>
